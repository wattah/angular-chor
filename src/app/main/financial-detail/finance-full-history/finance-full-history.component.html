<div id="body" class="container-fluid " [ngClass]="getClassEnvByTypeCustomer()">
    <!-- profil bloc & debt-mobile-service -->
    <div class="row">
		<div class="col-lg-8">
        <div class="block block-shadow block-with-background-oblique-container">
            <app-profil-information 
                [infoCustomer]="infoCustomer"
                [isProfilReduit] = "false"
                [isEntreprise]="(typeCustomer === 'company')"
                [customerId]="customerId"
                [isParticular]="(typeCustomer === 'particular')"
                [recoveryDate]="recoveryDate"
                [entrepriseRecoveryDate]="entrepriseRecoveryDate"
                [detteTotalTTC]="detteTotalTTC"
                [detteTotal]="detteTotal"
                (onSendNichesWithRemainingGreatThanZero)="onSendNichesWithRemainingGreatThanZeroEvent($event)"
                (onSendRemaining)="onSendRemainingEvent($event)"
            >
            </app-profil-information>
          </div>
          <p class="athena">
              <a class="athena" [routerLink]="(isEntreprise) ? ['/customer-dashboard/entreprise', customerId] : ['/customer-dashboard/particular', customerId]" 
               [queryParams]="{typeCustomer: typeCustomer, nicheId: selectedDebt.contractSelected.nicheIdentifier , isRowCliked: true}"
                ><span class="icon icon-min arrow-left-blue" queryParamsHandling="merge"></span>Retour à la vue 360</a>
          </p>
		</div>
		<div class="col-lg-16">
            <app-debt-mobile-service [totalDebt]="totalDebt" [typeCustomer]="typeCustomer" [nicheIdentifier]="infoCustomer?.nicheIdentifier"
            [severalCustomerTit]="severalCustomerTit"  [selectedDebt]="selectedDebt" (changeSelectedDebt)="onChangeSelectedDebt($event)"
            (selectedProfilView) = "onChangeSelectedProfilView($event)">
            </app-debt-mobile-service>
		</div>
	</div>

<!-- DETAILS -->
    <div class="row">
        <div class="col-24">
            <div class="block block-shadow">
                <h2 class="block-title athena">
                    Contrat N {{ selectedDebt.contractSelected.nicheIdentifier }}, Offre du contrat {{ selectedDebt.contractSelected.offerLabel }}
                    
                    <span class="block-title-item-link athena link" [class.disabled]="!selectedDebt.hasNext"  (click)="goToTheNextDebt()">
                        <span class="text-min normal no-transform">
                            Suivant
                            <span 
                                class="icon icon-min"
                                [ngClass]="getArrowRightClass()"
                            >
                            </span>
                        </span>
                    </span>
                
                    <span class="block-title-item-link">
                        <span class="text-giant normal light-grey no-transform">|</span>
                    </span>
                    <span class="block-title-item-link link athena" [class.disabled]="!selectedDebt.hasPrevious" (click)="goToThePreviousDebt()">
                        <span class="text-min normal no-transform">
                            <span 
                                class="icon icon-min"
                                [ngClass]="getArrowLeftClass()"
                            ></span>
                            Précédent
                        </span>
                    </span>
            </h2>
            <p class="athena">
                <a class="block-subtitle-item-link athena" [routerLink]="null" queryParamsHandling="merge"><span class="text-min normal no-transform">Compte rendu de facturation</span></a>
                <span class="block-subtitle-item-link text-giant normal light-grey no-transform">|</span>
                <a class="block-subtitle-item-link athena" 
                    [routerLink]="['/customer-dashboard', customerId, 'financial-detail', 'accounting-state']"
                    queryParamsHandling="merge">
                    <span class="text-min normal no-transform">Etat comptable</span>
                </a>
               <span *ngIf="selectedDebt.serviceSelected" class="block-subtitle-item-link text-giant normal light-grey no-transform">|</span>
                <a class="block-subtitle-item-link athena" *ngIf="selectedDebt.serviceSelected"
                [routerLink]="['/customer-dashboard',this.customerId,'financial-detail','bill-account','creation']" 
                [queryParams]="{
                    typeCustomer: typeCustomer, 
                    nicheIdentifier: selectedDebt.contractSelected.nicheIdentifier, 
                    univers: 'SERVICE',
                    rowSelected: selectedDebt.rowSelected
                }" 
                queryParamsHandling="merge">
                <span class="text-min normal no-transform" >Nouveau compte service</span></a>

           

                <span *ngxPermissionsOnly="['affichage_client_peniche']" class="block-subtitle-item-link text-giant normal light-grey no-transform" >|</span>
                <a *ngxPermissionsOnly="['affichage_client_peniche']" class="block-subtitle-item-link athena" [routerLink]="['/customer-dashboard', customerId, 'financial-detail', 'manage-customer-peniche'] "  queryParamsHandling="merge"><span class="text-min normal no-transform">Gérer le client Péniche</span></a>
                <ng-container *ngxPermissionsOnly="['new_peniche_gestion_client']">
                    <span class="block-subtitle-item-link text-giant normal light-grey no-transform">|</span>
                    <a  class="block-subtitle-item-link athena" 
                        [routerLink]="['/customer-dashboard', customerId,'bill-management','detail']"
                        queryParamsHandling="merge">
                        <span class="text-min normal no-transform">Gestion des factures</span>
                    </a>
                </ng-container>
            </p>
            <app-finance-tab-list-detail-debt 
                [selectedDebt]="selectedDebt" 
                [loadingActifAccounts]="loadingActifAccounts"
                (changeSelectedDebt)="onChangeSelectedDebt($event)" 
                [debtsOfBillingAccount]="debtsOfBillingAccount">
            </app-finance-tab-list-detail-debt>
            <p class="text-right athena">
                <span class="text-max grey">Contrat N {{ selectedDebt.contractSelected.nicheIdentifier }}, Offre du contrat {{ selectedDebt.contractSelected.offerLabel }}</span>
                <span class="block-title-item-link athena link" [class.disabled]="!selectedDebt.hasNext" (click)="goToTheNextDebt()">
                    <span class="text-min normal no-transform">Suivant<span class="icon icon-min" [ngClass]="getArrowRightClass()"></span></span>
                </span>
                <span class="block-title-item-link">
                    <span class="text-giant normal light-grey no-transform">|</span>
                </span>
                <span class="block-title-item-link athena link" [class.disabled]="!selectedDebt.hasPrevious" (click)="goToThePreviousDebt()">
                    <span class="text-min normal no-transform"><span class="icon icon-min "  [ngClass]="getArrowLeftClass()" ></span>Précédent</span>
                </span>
            </p>
        </div>
    </div>

</div>
